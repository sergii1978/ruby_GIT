# Создание потоков
[](appio)

Вид потока (mode) устанавливается с помощью группы модификаторов.

##### Модификаторы:

`r` - только для чтения;

`r+` - как для чтения, так и для записи (новые данные вместо старых);

`w` - только для записи (новые данные вместо старых). При необходимости создается новый файл;

`w+` - как для чтения, так и для записи (новые данные вместо старых). При необходимости создается новый файл;

`a` - только для записи (новые данные добавляются к старым). При необходимости создается новый файл;

`a+` - как для чтения, так и для записи (новые данные добавляются к старым). При необходимости создается новый файл;

`b` - двоичный режим (может использоваться с другими модификаторами). Чтение из файла выполняется в ASCII кодировке. Используется только для чтения двоичных файлов в Windows;

`t` - текстовый режим (может использоваться с другими модификаторами).

*****

При чтении или записи данных используются две кодировки: внутренняя и внешняя.

+ Внешняя кодировка - это кодировка текста внутри потока. По умолчанию она совпадает с кодировкой ОС.
+ Внутренняя кодировка - это кодировка для работы с полученными данными внутри программы. По умолчанию она совпадает с внешней кодировкой.

Если внутренняя и внешняя кодировка отличаются, то при чтении данных выполняется автоматическое преобразование из внешней кодировки во внутреннюю, а при записи данных - из внутренней во внешнюю.

После модификатора могут быть указаны внешняя и внутренняя кодировки, разделенные двоеточием: `"w+:ascii:utf-8"`. Если внутренняя кодировка не указана, то по умолчанию используется внешняя кодировка.

Вид потока также может быть изменен с помощью дополнительного аргумента - массива опций или набора констант из модуля File::Constants.

##### Опции:

`mode:` вид создаваемого потока;

`textmode:` true, текстовый режим;

`binmode:` true, двоичный режим;

`autoclose:` true, закрытие файла, после закрытия потока;

`external_encoding:` внешняя кодировка;

`internal_encoding:` внутренняя кодировка. Если внутренняя кодировка не указана, то по умолчанию используется внешняя кодировка;

`encoding:` внешняя и внутренняя кодировки в формате `external:internal`.

*****

Также принимаются элементы, влияющие на [преобразование кодировок](appencode).