# Дата и время

## Время (Time)

**Добавленные модули: Comparable**

Экземпляры класса Time - это абстрактные объекты, содержащие информацию о времени. Время хранится в секундах, начиная с 01.01.1970 00:00 UTC. Системы отсчета времени GMT (время по Гринвичу) и UTC (универсальное время) трактуются как эквивалентные.

При сравнении разных объектов необходимо помнить, что различные пояса могут иметь смещения по времени от UTC.

##### Аргументы:

`year` - год;

`month` - месяц: либо целое число от 1 до 12, либо текст, содержащий первые три буквы английского названия месяца (аббревиатуру);

`day` - номер дня в месяце: целое число от 1 до 31;

`wday` - номер дня в неделе: целое число от 0 до 6, начиная с воскресенья;

`yday` - номер дня в году: целое число от 1 до 366;

`isdst` - летнее время: логическая величина;

`zone` - временная зона: текст;

`hour` - час: целое число от 0 до 23;

`min` - минуты: целое число от 0 до 59;

`sec` - секунды: целое число или десятичная дробь от 0 до 60;

`usec` - микросекунды: целое число или десятичная дробь от 0 до 999.

*****

### Создание объекта

`::new # -> time`

`(year, month = 1, day = 1, hour = 0, min = 0, sec = 0, usec = 0, zone)`  
`# -> time`

Используется для создания объекта. При вызове без аргументов возвращается текущее системное время. Последним аргументом передается смещение относительно UTC в виде текста "+00:00" или количества секунд. По умолчанию берется системное смещение часового пояса.

~~~~~ ruby
  Time.new 1990, 3, 31, nil, nil, nil, "+04:00"
  # -> 1990-03-31 00:00:00 +0400
~~~~~

`::now # -> time`

Используется для получения текущего системного времени.  
`Time.now -> 2011-09-17 10:36:26 +0400`

`::at(time) # -> time`

`( sec, usec = nil ) # -> time`

Используется для создания объекта. Принимаются секунды и микросекунды, прошедшие с начала точки отсчета UTC. Время вычисляется с учетом смещения часового пояса.  
`Time.at 1 -> 1970-01-01 03:00:01 +0300`

`::utc( year, month = 1, day = 1, hour = 0, min = 0, sec = 0, usec = 0)`

`( sec, min, hour, day, month, year, wday, yday, isdst ) # -> time`  
Синонимы: `gm`

Используется для создания объекта.  
`Time.utc 1990, 3, 31 -> 1990-03-31 00:00:00 UTC`

`::local( year, month = 1, day = 1, hour = 0, min = 0, sec = 0, usec = 0, zone )`

`(sec, min, hour, day, month, year, wday, yday, isdst, zone) # -> time`  
Синонимы: `time`

Используется для создания объекта, с учетом смещения часового пояса.  
`Time.local 1990, 3, 31 -> 1990-03-31 00:00:00 +0400`

### Приведение типов

`.to_s # -> string`  
Синонимы: `inspect`

Преобразование в текст.  
`Time.local( 1990, 3, 31 ).to_s -> "1990-03-31 00:00:00 +0400"`

`.to_a # -> array`

Индексный массив вида:

~~~~~ ruby
  [ self.sec, self.min, self.hour,
    self.day, self.month, self.year,
    self.wday, self.yday,
    self.isdst, self.zone ]
~~~~~

~~~~~ ruby
Time.local( 1990, 3, 31 ).to_a
# -> [ 0, 0, 0, 31, 3, 1990, 6, 90, true, "MSD" ]
~~~~~

`.to_i # -> integer`  
Синонимы: `tv_sec`

Количество секунд прошедших начиная с 1970-01-01 00:00:00 UTC.  
`Time.local( 1990, 3, 31 ).to_i # -> 638827200`

`.to_r # -> rational`

Количество секунд прошедших начиная с 1970-01-01 00:00:00 UTC в виде рациональной дроби.

`Time.local( 1990, 3, 31 ).to_r # -> (638827200/1)`

`.to_f # -> float`

Количество секунд прошедших начиная с 1970-01-01 00:00:00 UTC в виде десятичной дроби.  
`Time.local( 1990, 3, 31 ).to_f # -> 638827200.0`

### Операторы

`.+(number) # -> time`

Используется для прибавления секунд.  
`Time.local( 1990, 3, 31 ) + 3600 # -> 1990-03-31 01:00:00 +0400`

`.-(time) # -> float`

Разница в секундах.  
`Time.local( 1990, 3, 31 ) - Time.new( 1990, 3, 31 ) -> 0.0`

`.-(number) # -> time`

Используется для уменьшения секунд.  
`Time.local( 1990, 3, 31 ) - 3600 -> 1990-03-30 23:00:00 +0400`

`.<=>(time)`

Сравнение.  
`Time.local( 1990, 3, 31 ) <=> Time.new( 1990, 3, 31 ) -> 0`

### Форматирование

`.strftime(format) # -> string`

Используется для форматирования времени на основе переданной [форматной строки](appdatetime).

### Системы остчета

`.getutc # -> time`  
Синонимы: `getgm`

Время относительно UTC (без смещения часовых поясов).  
`Time.local( 1990, 3, 31 ).getutc # -> 1990-03-30 20:00:00 UTC`

`.utc # -> self`  
Синонимы: `gmtime`

Версия предыдущего метода, изменяющая значение объекта.

`.getlocal( zone = nil ) # -> time`

Время с смещением часового пояса. Смещение может быть явно передано методу (по умолчанию используется системное смещение).  
`Time.local(1990, 3, 31).getutc.getlocal # -> 1990-03-31 00:00:00 +0400`

`.localtime( zone = nil ) # -> self`

Версия предыдущего метода, изменяющая значение объекта.

### Статистика

`.asctime # -> string`  
Синонимы: `ctime`

Время в виде текста.  
`Time.local( 1990, 3, 31 ).asctime # -> "Sat Mar 31 00:00:00 1990"`

`.utc_offset # -> integer`  
Синонимы: `gmt_offset, gmtoff`

Смещение часового пояса относительно UTC в секундах.  
`Time.local( 1990, 3, 31 ).utc_offset # -> 14400`

`.zone # -> string`

Название временной зоны.  
`verb!Time.local( 1990, 3, 31 ).zone # -> "MSD"`

`.year # -> integer`

Номер года.  
`Time.local( 1990, 3, 31 ).year # -> 1990`

`.month # -> integer`  
Синонимы: `mon`

Номер месяца.  
`verb!Time.local( 1990, 3, 31 ).month # -> 3`

`.yday # -> integer`

Номер дня в году от 1 до 366.  
`Time.local( 1990, 3, 31 ).yday # -> 90`

`.day # -> integer`  
Синонимы: `mday`

Номер дня в месяце.  
`Time.local( 1990, 3, 31 ).day # -> 31`

`.wday # -> integer`

Номер дня недели (от 0 до 6, начиная с воскресенья).  
`Time.local( 1990, 3, 31 ).wday # -> 6`

`.hour # -> integer`

Час дня (число от 0 до 23).  
`Time.local( 1990, 3, 31 ).hour # -> 0`

`.min # -> integer`

Количество минут (число от 0 до 59).  
`Time.local( 1990, 3, 31 ).min # -> 0`

`.sec # -> integer`

Количество секунд (число от 0 до 60).  
`Time.local( 1990, 3, 31 ).sec # -> 0`

`.subsec # -> integer`

Дробная часть секунд.  
`Time.local( 1990, 3, 31 ).subsec # -> 0`

`.usec # -> integer`  
Синонимы: `tv_usec`

Количество микросекунд.  
`Time.local( 1990, 3, 31 ).usec # -> 0`

`.nsec # -> integer`  
Синонимы: `tv_nsec`

Количество наносекунд.  
`Time.local( 1990, 3, 31 ).nsec # -> 0`

### Предикаты

`.monday? # -> bool`

Проверка является ли понедельник днем недели.  
`Time.local( 1990, 3, 31 ).monday? # -> false`

`.tuesday? # -> bool`

Проверка является ли вторник днем недели.  
`Time.local( 1990, 3, 31 ).tuesday? # -> false`

`.wednesday? # -> bool`

Проверка является ли среда днем недели.  
`Time.local( 1990, 3, 31 ).wednesday? # -> false`

`.thursday? # -> bool`

Проверка является ли четверг днем недели.  
`Time.local( 1990, 3, 31 ).saturday? # -> false`

`.friday? # -> bool`

Проверка является ли пятница днем недели.  
`Time.local( 1990, 3, 31 ).friday? # -> false`

`.saturday? # -> bool`

Проверка является ли суббота днем недели.  
`Time.local( 1990, 3, 31 ).saturday? # -> true`

`.sunday? # -> bool`

Проверка является ли воскресенье днем недели.  
`Time.local( 1990, 3, 31 ).saturday? # -> false`

`.utc? # -> bool`  
Синонимы: `gmt?`

Проверка используется ли время относительно UTC.  
`Time.local( 1990, 3, 31 ).utc? # -> false`

`.dst? # -> bool`  
Синонимы: `isdst`

Проверка используется ли переход на летнее время.  
`Time.local( 1990, 3, 31 ).dst? # -> true`

### Остальное

`.hash # -> integer`

Цифровой код объекта.  
`Time.local( 1990, 3, 31 ).hash # -> -494674000`

`.round( precise = 0 ) # -> time`

Используется для округления секунд с заданной точностью. Точность определяет размер дробной части.  
`Time.local( 1990, 3, 31 ).round 2 # -> 1990-03-31 00:00:00 +0400`