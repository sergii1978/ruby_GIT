## Регулярные выражения

### Regexp

##### Константы

`Regexp::IGNORECASE` - регистр символов игнорируется (модификатор i);

`Regexp::EXTENDED` - пробельные символы и комментарии игнорируются (модификатор x);

`Regexp::MULTILINE` - многострочный режим (модификатор m);

`Regexp::FIXEDENCODING` - другая кодировка.

*****

`::new( template, object = nil ) # -> regexp`  
Синонимы: `compile`

Используется для создания нового регулярного выражения. Вторым аргументом передаются константы класса или произвольные объекты:

+ когда значение аргумента истинно, регистр символов будет игнорироваться;

+ когда передаются символы `?n` или `?N`, в теле регулярного выражения используется ASCII кодировка.

`Regexp.new "abc", 2 # -> /abc/x`

`::union( *template или array = nil ) # -> regexp`

Используется для объединения нескольких регулярных выражений (объединение множеств). Без аргументов возвращается `/!?/`.  
`Regexp.union [ ?0, ?1, ?2 ] # -> /0|1|2/`

#### Преобразование типов

`::try_convert(object) # -> regexp`

Преобразование в регулярное выражение с помощью метода `.to_regexp`. Если метод для объекта не определен, то возвращается nil.  
`Regexp.try_convert "abc" # -> nil`

`.to_s # -> string`

Текст, содержащий тело регулярного выражения и его модификаторы.  
`/(a-z)/i.to_s # -> "(?i-mx:(a-z))"`

`.inspect # -> string`

Текст, содержащий регулярное выражение.  
`/(a-z)/i.inspect # -> "/(a-z)/i"`

`.source # -> string`

Текст, содержащий тело регулярного выражения c экранированными спецсимволами.  
`/(a-z)/i.source # -> "(a-z)"`

#### Операторы

`.===(string) # -> bool` Поиск совпадений.

`.=~(string) # -> integer` Поиск совпадений.

`.~(regexp) # -> integer`

Поиск совпадений с последней прочитанной строкой (`$_`).

#### Поиск совпадений

`::last_match # -> match`

`(group) # -> string`

Информация о последнем поиске совпадений. Если совпадений не найдено, то возвращается nil.

`.match( text, start = 0 ) # -> match`

`( text, start = 0 ) { |match| } # -> object`

Используется для сохранения информации о поиске совпадений. Если совпадений не найдено, то возвращается nil.

#### Кодировка символов

`.encoding # -> encoding`

Используемая кодировка.  
`/(a-z)/i.encoding # -> #<Encoding:US-ASCII>`

`.fixed_encoding? # -> bool`

Проверка используется ли любая кодировка, кроме ASCII.  
`/(a-z)/i.fixed_encoding? # -> false`

#### Остальное

`.casefold? # -> bool`

Проверка игнорирования регистра символов (модификатор i).  
`/(a-z)/i.casefold? # -> true`

`.named_captures # -> hash`

Массив идентификаторов групп, ассоциируемых с их позициями.  
`/(?<group>a-z)/i.named_captures # -> { "group" => [1] }`

`.names # -> array`

Массив идентификаторов групп.  
`/(?<group>a-z)/i.names # -> ["group"]`

`.options # -> integer`

Сумма чисел используемых модификаторов.  
`/(a-z)/i.options # -> 1`

`.hash # -> integer`

Цифровой код объекта.  
`/(a-z)/i.hash # -> -145911848`

`::escape(text) # -> string`  
Синонимы: `quote`

Используется для экранирования спецсимволов.

При этом `Regexp.new( Regexp.escape string ) =~ string # -> 0`  
`Regexp.escape "'\*?{}.'" # -> "'\\*\\?\\{\\}\\.'"`

### MatchData

Экземпляры класса содержат полную информацию о найденных совпадениях.

#### Преобразование типов

`.to_s # -> string`

Полный текст найденного совпадения.

`.inspect # -> string`

Текст, содержащий информацию об объекте.

`.to_a # -> array`

Массив найденных совпадений.

#### Элементы

`.[index] # -> string`

Используется для получения совпадения с группой (полный  текст совпадения - элемент с индексом 0).

`.[first, last] # -> array`

Используется для получения массива фрагментов, совпадающих с переданными группами. Когда границы диапазона отрицательны, отсчет групп ведется справа налево.

`.[range] # -> array`

Используется для получения массива фрагментов, совпадающих с переданными группами. Когда границы диапазона отрицательны, отсчет групп ведется справа налево.

`.[name] # -> string`

Используется для получения фрагмента, совпадающего с группой.

`.captures # -> array`

Используется для получения массива фрагментов, совпадающих с нумерованными группами.

`.offset(group) # -> array`

Используется для получения массива индексов символов, с которых началось и которыми закончилось совпадение фрагмента с группой.

`.begin(group) # -> integer`

Используется для получения индекса символа, с которого началось совпадение фрагмента с группой.

`.end(group) # -> integer`

Используется для получения индекса символа, которым заканчивается совпадение фрагмента с группой.

`.pre_match # -> string`

Фрагмент текста перед найденным совпадением.

`.post_match # -> string`

Фрагмент текста после найденного совпадения.

#### Остальное

`.regexp # -> regexp`

Регулярное выражение, с которым происходило сравнение.

`.string # -> string`

Неизменяемая копия текста, в котором выполнялся поиск совпадений.

`.size # -> integer`  
Синонимы: `length`

Количество всех элементов поиска (включая полный текст совпадения).

`.names # -> array`

Массив, содержащий идентификаторы групп регулярного выражения.

`.hash # -> integer`

Цифровой код объекта.
